<script>
$(".cat-list").sortable({
    handle: '.reorder',
    stop: function (event, ui) {

        var ids = [];

        $(ui.item).parents('ul').first().find('> li.cat').each(function () {
            ids.push($(this).data('id'));
        });

        $.ajax({
            type: 'POST',
            data: {ids: ids},
            url: "{{ get_service('sonata.admin.category').generateUrl('reorder') }}",
            success: function () {
                // alert('done');
            }
        });
    }
});

$(".prod-list").sortable({
    handle: '.reorder',
    stop: function (event, ui) {

        var ids = [];

        $(ui.item).parents('ul').first().find('> li.prod').each(function () {
            ids.push($(this).data('id'));
        });

        $.ajax({
            type: 'POST',
            data: {ids: ids},
            url: "{{ get_service('sonata.admin.product').generateUrl('reorder') }}",
            success: function () {
                // alert('done');
            }
        });
    }
});

$(".reorder")
    .mouseenter(function () {
        $(this).parents('li').first().addClass('hover');
    })
    .mouseleave(function () {
        $(this).parents('li').first().removeClass('hover');
    })
    ;

$(".toggle-active-category, .toggle-active-product")
    .click(function (e) {
        e.preventDefault();

        var that = $(this);

        $.ajax({
            url: $(this).attr('href'),
            success: function (rData) {
                if (rData.available) {
                    that.html('<i class="fa fa-check-square-o icon-white"></i>');
                } else {
                    that.html('<i class="fa fa-square-o icon-white"></i>');
                }
            }
        })
    });
</script>
